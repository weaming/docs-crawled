<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <title>
            
    
    1.1 Changelog
 &mdash;
    SQLAlchemy 1.1 Documentation

        </title>

        
            <!-- begin iterate through SQLA + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
            <!-- end iterate through SQLA + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.1 Documentation" href="../index.html" />
        <link rel="up" title="Changes and Migration" href="index.html" />
        <link rel="next" title="1.0 Changelog" href="changelog_10.html" />
        <link rel="prev" title="What&#8217;s New in SQLAlchemy 1.1?" href="migration_11.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.1.0b1</span> | Release Date: not released
    </div>

    <h1>SQLAlchemy 1.1 Documentation</h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 1.1 Documentation</a></h3>

            <p id="sidebar-topnav">
                <a href="../contents.html">Contents</a> |
                <a href="../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <input type="text" name="q" size="12" /> <input type="submit" value="Search" />
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        
        <h3>
            <a href="index.html" title="Changes and Migration">Changes and Migration</a>
        </h3>

        <ul>
<li><span class="link-container first"><a class="reference external" href="migration_11.html">What&#8217;s New in SQLAlchemy 1.1?</a></span></li>
<li class="selected"><span class="link-container first"><strong>1.1 Changelog</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1">1.1.0b1</a></span><ul>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1-orm">orm</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1-orm-declarative">orm declarative</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1-sql">sql</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1-schema">schema</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1-postgresql">postgresql</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1-mysql">mysql</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1-sqlite">sqlite</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1-mssql">mssql</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1-oracle">oracle</a></span></li>
<li><span class="link-container first"><a class="reference external" href="#change-1.1.0b1-misc">misc</a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container first"><a class="reference external" href="changelog_10.html">1.0 Changelog</a></span></li>
<li><span class="link-container first"><a class="reference external" href="changelog_09.html">0.9 Changelog</a></span></li>
<li><span class="link-container first"><a class="reference external" href="changelog_08.html">0.8 Changelog</a></span></li>
<li><span class="link-container first"><a class="reference external" href="changelog_07.html">0.7 Changelog</a></span></li>
<li><span class="link-container first"><a class="reference external" href="changelog_06.html">0.6 Changelog</a></span></li>
<li><span class="link-container first"><a class="reference external" href="changelog_05.html">0.5 Changelog</a></span></li>
<li><span class="link-container first"><a class="reference external" href="changelog_04.html">0.4 Changelog</a></span></li>
<li><span class="link-container first"><a class="reference external" href="changelog_03.html">0.3 Changelog</a></span></li>
<li><span class="link-container first"><a class="reference external" href="changelog_02.html">0.2 Changelog</a></span></li>
<li><span class="link-container first"><a class="reference external" href="changelog_01.html">0.1 Changelog</a></span></li>
<li><span class="link-container first"><a class="reference external" href="migration_10.html">What&#8217;s New in SQLAlchemy 1.0?</a></span></li>
<li><span class="link-container first"><a class="reference external" href="migration_09.html">What&#8217;s New in SQLAlchemy 0.9?</a></span></li>
<li><span class="link-container first"><a class="reference external" href="migration_08.html">What&#8217;s New in SQLAlchemy 0.8?</a></span></li>
<li><span class="link-container first"><a class="reference external" href="migration_07.html">What&#8217;s New in SQLAlchemy 0.7?</a></span></li>
<li><span class="link-container first"><a class="reference external" href="migration_06.html">What&#8217;s New in SQLAlchemy 0.6?</a></span></li>
<li><span class="link-container first"><a class="reference external" href="migration_05.html">What&#8217;s new in SQLAlchemy 0.5?</a></span></li>
<li><span class="link-container first"><a class="reference external" href="migration_04.html">What&#8217;s new in SQLAlchemy 0.4?</a></span></li>
</ul>



        </div>

    </div>

    

    <div id="docs-body" class="withsidebar" >
        
<div class="section" id="changelog">
<h1>1.1 Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="change-1.1.0b1">
<h2>1.1.0b1<a class="headerlink" href="#change-1.1.0b1" title="Permalink to this headline">¶</a></h2>
no release date<div class="section" id="change-1.1.0b1-orm">
<h3>orm<a class="headerlink" href="#change-1.1.0b1-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.1.0b1-0"><span class="target" id="change-ca208194a1d7ff0fd2e7a20963cb2ea4"><strong>[orm] [feature] </strong></span>Added new method <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.one_or_none" title="sqlalchemy.orm.query.Query.one_or_none"><code class="xref py py-meth docutils literal"><span class="pre">Query.one_or_none()</span></code></a>; same as
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.one" title="sqlalchemy.orm.query.Query.one"><code class="xref py py-meth docutils literal"><span class="pre">Query.one()</span></code></a> but returns None if no row found.  Pull request
courtesy esiegerman.<a class="changeset-link headerlink reference internal" href="#change-ca208194a1d7ff0fd2e7a20963cb2ea4">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/201">pull request github:201</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-1"><span class="target" id="change-d5cf16064aa92922d05395b09c928698"><strong>[orm] [feature] </strong></span>The <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.SessionEvents" title="sqlalchemy.orm.events.SessionEvents"><code class="xref py py-class docutils literal"><span class="pre">SessionEvents</span></code></a> suite now includes events to allow
unambiguous tracking of all object lifecycle state transitions
in terms of the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> itself, e.g. pending,
transient,  persistent, detached.   The state of the object
within each event is also defined.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-2677"><span>New Session lifecycle events</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-d5cf16064aa92922d05395b09c928698">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2677">#2677</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-2"><span class="target" id="change-df3d7ca7a278488ea611b03405eb14fd"><strong>[orm] [feature] </strong></span>Added a new session lifecycle state <a class="reference internal" href="../glossary.html#term-deleted"><span class="xref std std-term">deleted</span></a>.  This new state
represents an object that has been deleted from the <a class="reference internal" href="../glossary.html#term-persistent"><span class="xref std std-term">persistent</span></a>
state and will move to the <a class="reference internal" href="../glossary.html#term-detached"><span class="xref std std-term">detached</span></a> state once the transaction
is committed.  This resolves the long-standing issue that objects
which were deleted existed in a gray area between persistent and
detached.   The <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.state.InstanceState.persistent" title="sqlalchemy.orm.state.InstanceState.persistent"><code class="xref py py-attr docutils literal"><span class="pre">InstanceState.persistent</span></code></a> accessor will
<strong>no longer</strong> report on a deleted object as persistent; the
<a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.state.InstanceState.deleted" title="sqlalchemy.orm.state.InstanceState.deleted"><code class="xref py py-attr docutils literal"><span class="pre">InstanceState.deleted</span></code></a> accessor will instead be True for
these objects, until they become detached.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-2677"><span>New Session lifecycle events</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-df3d7ca7a278488ea611b03405eb14fd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2677">#2677</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-3"><span class="target" id="change-09452835bc692d53fcd69eaae680cdf6"><strong>[orm] [feature] </strong></span>Added new checks for the common error case of passing mapped classes
or mapped instances into contexts where they are interpreted as
SQL bound parameters; a new exception is raised for this.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3321"><span>Specific checks added for passing mapped classes, instances as SQL literals</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-09452835bc692d53fcd69eaae680cdf6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3321">#3321</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-4"><span class="target" id="change-d3eba7a355f710e91a838249c77f86ed"><strong>[orm] [bug] </strong></span>Fixed regression caused in 1.0.10 by the fix for <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3593">#3593</a> where
the check added for a polymorphic joinedload from a
poly_subclass-&gt;class-&gt;poly_baseclass connection would fail for the
scenario of class-&gt;poly_subclass-&gt;class.<a class="changeset-link headerlink reference internal" href="#change-d3eba7a355f710e91a838249c77f86ed">¶</a><p>This change is also <strong>backported</strong> to: 1.0.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3611">#3611</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-5"><span class="target" id="change-724ea8af281f5ce631c9c2d7466af0ff"><strong>[orm] [bug] </strong></span>Fixed bug where <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.bulk_update_mappings" title="sqlalchemy.orm.session.Session.bulk_update_mappings"><code class="xref py py-meth docutils literal"><span class="pre">Session.bulk_update_mappings()</span></code></a> and related
would not bump a version id counter when in use.  The experience
here is still a little rough as the original version id is required
in the given dictionaries and there&#8217;s not clean error reporting
on that yet.<a class="changeset-link headerlink reference internal" href="#change-724ea8af281f5ce631c9c2d7466af0ff">¶</a><p>This change is also <strong>backported</strong> to: 1.0.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3610">#3610</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-6"><span class="target" id="change-3579d38683adf89f15a50cc7cf7c5c26"><strong>[orm] [bug] </strong></span>Major fixes to the <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.mapper.Mapper.params.eager_defaults" title="sqlalchemy.orm.mapper.Mapper"><code class="xref py py-paramref docutils literal"><span class="pre">Mapper.eager_defaults</span></code></a> flag, this
flag would not be honored correctly in the case that multiple
UPDATE statements were to be emitted, either as part of a flush
or a bulk update operation.  Additionally, RETURNING
would be emitted unnecessarily within update statements.<a class="changeset-link headerlink reference internal" href="#change-3579d38683adf89f15a50cc7cf7c5c26">¶</a><p>This change is also <strong>backported</strong> to: 1.0.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3609">#3609</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-7"><span class="target" id="change-3d53f04497b36922748b53602fd27123"><strong>[orm] [bug] </strong></span>Fixed bug where use of the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal"><span class="pre">Query.select_from()</span></code></a> method would
cause a subsequent call to the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.with_parent" title="sqlalchemy.orm.query.Query.with_parent"><code class="xref py py-meth docutils literal"><span class="pre">Query.with_parent()</span></code></a> method to
fail.<a class="changeset-link headerlink reference internal" href="#change-3d53f04497b36922748b53602fd27123">¶</a><p>This change is also <strong>backported</strong> to: 1.0.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3606">#3606</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-8"><span class="target" id="change-6424e55bd30bb2ad236fb25e3b742cba"><strong>[orm] [bug] </strong></span>Fixed issue where post_update on a many-to-one relationship would
fail to emit an UPDATE in the case where the attribute were set to
None and not previously loaded.<a class="changeset-link headerlink reference internal" href="#change-6424e55bd30bb2ad236fb25e3b742cba">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3599">#3599</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-9"><span class="target" id="change-ec26b1b59b92319d3bfe08c0ecb0aa2e"><strong>[orm] [bug] </strong></span>Fixed bug which is actually a regression that occurred between
versions 0.8.0 and 0.8.1, due <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2714">#2714</a>.  The case where
joined eager loading needs to join out over a subclass-bound
relationship when &#8220;with_polymorphic&#8221; were also used would fail
to join from the correct entity.<a class="changeset-link headerlink reference internal" href="#change-ec26b1b59b92319d3bfe08c0ecb0aa2e">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3593">#3593</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-10"><span class="target" id="change-094dd5b842c9d0e69e2debaf5628f0ae"><strong>[orm] [bug] </strong></span>Fixed joinedload bug which would occur when a. the query includes
limit/offset criteria that forces a subquery b. the relationship
uses &#8220;secondary&#8221; c. the primaryjoin of the relationship refers to
a column that is either not part of the primary key, or is a PK
col in a joined-inheritance subclass table that is under a different
attribute name than the parent table&#8217;s primary key column d. the
query defers the columns that are present in the primaryjoin, typically
via not being included in load_only(); the necessary column(s) would
not be present in the subquery and produce invalid SQL.<a class="changeset-link headerlink reference internal" href="#change-094dd5b842c9d0e69e2debaf5628f0ae">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3592">#3592</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-11"><span class="target" id="change-36eda6c8960b8c28cecdb48c5fa4f9c8"><strong>[orm] [bug] </strong></span>A rare case which occurs when a <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.rollback" title="sqlalchemy.orm.session.Session.rollback"><code class="xref py py-meth docutils literal"><span class="pre">Session.rollback()</span></code></a> fails in the
scope of a <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.flush" title="sqlalchemy.orm.session.Session.flush"><code class="xref py py-meth docutils literal"><span class="pre">Session.flush()</span></code></a> operation that&#8217;s raising an
exception, as has been observed in some MySQL SAVEPOINT cases, prevents
the original  database exception from being observed when it was
emitted during  flush, but only on Py2K because Py2K does not support
exception  chaining; on Py3K the originating exception is chained.  As
a workaround, a warning is emitted in this specific case showing at
least the string message of the original database error before we
proceed to raise  the rollback-originating exception.<a class="changeset-link headerlink reference internal" href="#change-36eda6c8960b8c28cecdb48c5fa4f9c8">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2696">#2696</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-12"><span class="target" id="change-7eb9c5199698124ecb256ace89422a70"><strong>[orm] [bug] [postgresql] </strong></span>Fixed regression in 1.0 where new feature of using &#8220;executemany&#8221;
for UPDATE statements in the ORM (e.g. <a class="reference internal" href="migration_10.html#feature-updatemany"><span>UPDATE statements are now batched with executemany() in a flush</span></a>)
would break on Postgresql and other RETURNING backends
when using server-side version generation
schemes, as the server side value is retrieved via RETURNING which
is not supported with executemany.<a class="changeset-link headerlink reference internal" href="#change-7eb9c5199698124ecb256ace89422a70">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3556">#3556</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-13"><span class="target" id="change-07697caa639f332df71ad90e85494e14"><strong>[orm] [bug] </strong></span>Fixed rare TypeError which could occur when stringifying certain
kinds of internal column loader options within internal logging.<a class="changeset-link headerlink reference internal" href="#change-07697caa639f332df71ad90e85494e14">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3539">#3539</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-14"><span class="target" id="change-22510b847ba04896355ce8966325fa5e"><strong>[orm] [bug] </strong></span>Fixed bug in <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.bulk_save_objects" title="sqlalchemy.orm.session.Session.bulk_save_objects"><code class="xref py py-meth docutils literal"><span class="pre">Session.bulk_save_objects()</span></code></a> where a mapped
column that had some kind of &#8220;fetch on update&#8221; value and was not
locally present in the given object would cause an AttributeError
within the operation.<a class="changeset-link headerlink reference internal" href="#change-22510b847ba04896355ce8966325fa5e">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3525">#3525</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-15"><span class="target" id="change-d6415d84814aacea44bea9a716e72ab7"><strong>[orm] [bug] </strong></span>Fixed 1.0 regression where the &#8220;noload&#8221; loader strategy would fail
to function for a many-to-one relationship.  The loader used an
API to place &#8220;None&#8221; into the dictionary which no longer actually
writes a value; this is a side effect of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">#3061</a>.<a class="changeset-link headerlink reference internal" href="#change-d6415d84814aacea44bea9a716e72ab7">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3510">#3510</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-16"><span class="target" id="change-ac6144457b07a73e68843f65fff61adb"><strong>[orm] [bug] </strong></span>The <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.merge" title="sqlalchemy.orm.session.Session.merge"><code class="xref py py-meth docutils literal"><span class="pre">Session.merge()</span></code></a> method now tracks pending objects by
primary key before emitting an INSERT, and merges distinct objects with
duplicate primary keys together as they are encountered, which is
essentially semi-deterministic at best.   This behavior
matches what happens already with persistent objects.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3601"><span>Session.merge resolves pending conflicts the same as persistent</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-ac6144457b07a73e68843f65fff61adb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3601">#3601</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-17"><span class="target" id="change-dd65aebe5daa65ac33d96732d8c19890"><strong>[orm] [bug] </strong></span>Fixed bug where the &#8220;single table inheritance&#8221; criteria would be
added onto the end of a query in some inappropriate situations, such
as when querying from an exists() of a single-inheritance subclass.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3582"><span>Further Fixes to single-table inheritance querying</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-dd65aebe5daa65ac33d96732d8c19890">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3582">#3582</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-18"><span class="target" id="change-ad8a491013281436a5ec669721de6d99"><strong>[orm] [bug] </strong></span>Added a new type-level modifier <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.evaluates_none" title="sqlalchemy.types.TypeEngine.evaluates_none"><code class="xref py py-meth docutils literal"><span class="pre">TypeEngine.evaluates_none()</span></code></a>
which indicates to the ORM that a positive set of None should be
persisted as the value NULL, instead of omitting the column from
the INSERT statement.  This feature is used both as part of the
implementation for <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3514">#3514</a> as well as a standalone feature
available on any type.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3250"><span>New options allowing explicit persistence of NULL over a default</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-ad8a491013281436a5ec669721de6d99">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3250">#3250</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-19"><span class="target" id="change-48c47319c947b658d154aa9c012b32e3"><strong>[orm] [bug] </strong></span>Internal calls to &#8220;bookkeeping&#8221; functions within
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.bulk_save_objects" title="sqlalchemy.orm.session.Session.bulk_save_objects"><code class="xref py py-meth docutils literal"><span class="pre">Session.bulk_save_objects()</span></code></a> and related bulk methods have
been scaled back to the extent that this functionality is not
currently used, e.g. checks for column default values to be
fetched after an INSERT or UPDATE statement.<a class="changeset-link headerlink reference internal" href="#change-48c47319c947b658d154aa9c012b32e3">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3526">#3526</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-20"><span class="target" id="change-1b66765ab8f05691258b629037065a6e"><strong>[orm] [bug] [postgresql] </strong></span>Additional fixes have been made regarding the value of <code class="docutils literal"><span class="pre">None</span></code>
in conjunction with the Postgresql <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">JSON</span></code></a> type.  When
the <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON.params.none_as_null" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-paramref docutils literal"><span class="pre">JSON.none_as_null</span></code></a> flag is left at its default
value of <code class="docutils literal"><span class="pre">False</span></code>, the ORM will now correctly insert the Json
&#8220;&#8216;null&#8217;&#8221; string into the column whenever the value on the ORM
object is set to the value <code class="docutils literal"><span class="pre">None</span></code> or when the value <code class="docutils literal"><span class="pre">None</span></code>
is used with <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.bulk_insert_mappings" title="sqlalchemy.orm.session.Session.bulk_insert_mappings"><code class="xref py py-meth docutils literal"><span class="pre">Session.bulk_insert_mappings()</span></code></a>,
<strong>including</strong> if the column has a default or server default on it.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="migration_11.html#change-3514"><span>Postgresql JSON &#8220;null&#8221; is inserted as expected with ORM operations, regardless of column default present</span></a></p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3250"><span>New options allowing explicit persistence of NULL over a default</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-1b66765ab8f05691258b629037065a6e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3514">#3514</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-21"><span class="target" id="change-32d6229592346b5ad6b2e70e7d6a902d"><strong>[orm] [change] </strong></span>The <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.params.weak_identity_map" title="sqlalchemy.orm.session.Session"><code class="xref py py-paramref docutils literal"><span class="pre">Session.weak_identity_map</span></code></a> parameter is deprecated.
See the new recipe at <a class="reference internal" href="../orm/session_state_management.html#session-referencing-behavior"><span>Session Referencing Behavior</span></a> for
an event-based approach to maintaining strong identity map behavior.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-2677"><span>New Session lifecycle events</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-32d6229592346b5ad6b2e70e7d6a902d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2677">#2677</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.1.0b1-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-1.1.0b1-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.1.0b1-22"><span class="target" id="change-632cbc7fe074a0ddb7f561d2d7e1e8c5"><strong>[bug] [orm] [declarative] </strong></span>Fixed bug where in Py2K a unicode literal would not be accepted as the
string name of a class or other argument within declarative using
<a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.backref" title="sqlalchemy.orm.backref"><code class="xref py py-func docutils literal"><span class="pre">backref()</span></code></a> on <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal"><span class="pre">relationship()</span></code></a>.  Pull request courtesy
Nils Philippsen.<a class="changeset-link headerlink reference internal" href="#change-632cbc7fe074a0ddb7f561d2d7e1e8c5">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/212">pull request github:212</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.1.0b1-sql">
<h3>sql<a class="headerlink" href="#change-1.1.0b1-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.1.0b1-23"><span class="target" id="change-d5574c3ff1c38e799e4e5c8499767e41"><strong>[sql] [feature] </strong></span>Added support for parameter-ordered SET clauses in an UPDATE
statement.  This feature is available by passing the
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.update.params.preserve_parameter_order" title="sqlalchemy.sql.expression.update"><code class="xref py py-paramref docutils literal"><span class="pre">preserve_parameter_order</span></code></a>
flag either to the core <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal"><span class="pre">Update</span></code></a> construct or alternatively
adding it to the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.update.params.update_args" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-paramref docutils literal"><span class="pre">Query.update.update_args</span></code></a> dictionary at
the ORM-level, also passing the parameters themselves as a list of 2-tuples.
Thanks to Gorka Eguileor for implementation and tests.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../core/tutorial.html#updates-order-parameters"><span>Parameter-Ordered Updates</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-d5574c3ff1c38e799e4e5c8499767e41">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/200">pull request github:200</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-24"><span class="target" id="change-f1a5b143ac2614a44c4d4be425086e5e"><strong>[sql] [feature] </strong></span>Added support for &#8220;set-aggregate&#8221; functions of the form
<code class="docutils literal"><span class="pre">&lt;function&gt;</span> <span class="pre">WITHIN</span> <span class="pre">GROUP</span> <span class="pre">(ORDER</span> <span class="pre">BY</span> <span class="pre">&lt;criteria&gt;)</span></code>, using the
method <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.FunctionElement.within_group" title="sqlalchemy.sql.functions.FunctionElement.within_group"><code class="xref py py-meth docutils literal"><span class="pre">FunctionElement.within_group()</span></code></a>.  A series of common
set-aggregate functions with return types derived from the set have
been added. This includes functions like <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.percentile_cont" title="sqlalchemy.sql.functions.percentile_cont"><code class="xref py py-class docutils literal"><span class="pre">percentile_cont</span></code></a>,
<a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.dense_rank" title="sqlalchemy.sql.functions.dense_rank"><code class="xref py py-class docutils literal"><span class="pre">dense_rank</span></code></a> and others.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3132"><span>New Function features, &#8220;WITHIN GROUP&#8221;, array_agg and set aggregate functions</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-f1a5b143ac2614a44c4d4be425086e5e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1370">#1370</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-25"><span class="target" id="change-1765f3641a6e264a7fe24088c46a4b59"><strong>[sql] [feature] [postgresql] </strong></span>Added support for the SQL-standard function <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.array_agg" title="sqlalchemy.sql.functions.array_agg"><code class="xref py py-class docutils literal"><span class="pre">array_agg</span></code></a>,
which automatically returns an <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Array" title="sqlalchemy.types.Array"><code class="xref py py-class docutils literal"><span class="pre">Array</span></code></a> of the correct type
and supports index / slice operations, as well as
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.array_agg" title="sqlalchemy.dialects.postgresql.array_agg"><code class="xref py py-func docutils literal"><span class="pre">postgresql.array_agg()</span></code></a>, which returns a <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a>
with additional comparison features.   As arrays are only
supported on Postgresql at the moment, only actually works on
Postgresql.  Also added a new construct
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.aggregate_order_by" title="sqlalchemy.dialects.postgresql.aggregate_order_by"><code class="xref py py-class docutils literal"><span class="pre">postgresql.aggregate_order_by</span></code></a> in support of PG&#8217;s
&#8220;ORDER BY&#8221; extension.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3132"><span>New Function features, &#8220;WITHIN GROUP&#8221;, array_agg and set aggregate functions</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-1765f3641a6e264a7fe24088c46a4b59">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3132">#3132</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-26"><span class="target" id="change-073de265914ed4fee6ddbc41fb452906"><strong>[sql] [feature] </strong></span>Added a new type to core <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Array" title="sqlalchemy.types.Array"><code class="xref py py-class docutils literal"><span class="pre">types.Array</span></code></a>.  This is the
base of the PostgreSQL <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">ARRAY</span></code></a> type, and is now part of Core
to begin supporting various SQL-standard array-supporting features
including some functions and eventual support for native arrays
on other databases that have an &#8220;array&#8221; concept, such as DB2 or Oracle.
Additionally, new operators <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.any_" title="sqlalchemy.sql.expression.any_"><code class="xref py py-func docutils literal"><span class="pre">expression.any_()</span></code></a> and
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.all_" title="sqlalchemy.sql.expression.all_"><code class="xref py py-func docutils literal"><span class="pre">expression.all_()</span></code></a> have been added.  These support not just
array constructs on Postgresql, but also subqueries that are usable
on MySQL (but sadly not on Postgresql).<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3516"><span>Array support added to Core; new ANY and ALL operators</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-073de265914ed4fee6ddbc41fb452906">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3516">#3516</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-27"><span class="target" id="change-2f2ff0731e3b72bb86afd59a9403a487"><strong>[sql] [bug] </strong></span>Fixed bug in <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Update.return_defaults" title="sqlalchemy.sql.expression.Update.return_defaults"><code class="xref py py-meth docutils literal"><span class="pre">Update.return_defaults()</span></code></a> which would cause all
insert-default holding columns not otherwise included in the SET
clause (such as primary key cols) to get rendered into the RETURNING
even though this is an UPDATE.<a class="changeset-link headerlink reference internal" href="#change-2f2ff0731e3b72bb86afd59a9403a487">¶</a><p>This change is also <strong>backported</strong> to: 1.0.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3609">#3609</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-28"><span class="target" id="change-c715353708148f735fed39bd2f1034d8"><strong>[sql] [bug] </strong></span>Fixed issue within the <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal"><span class="pre">Insert.from_select()</span></code></a> construct whereby
the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal"><span class="pre">Select</span></code></a> construct would have its <code class="docutils literal"><span class="pre">._raw_columns</span></code>
collection mutated in-place when compiling the <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a>
construct, when the target <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> has Python-side defaults.
The <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal"><span class="pre">Select</span></code></a> construct would compile standalone with the
erroneous column present subsequent to compilation of the
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a>, and the the <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal"><span class="pre">Insert</span></code></a> statement itself would
fail on a second compile attempt due to duplicate bound parameters.<a class="changeset-link headerlink reference internal" href="#change-c715353708148f735fed39bd2f1034d8">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3603">#3603</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-29"><span class="target" id="change-a251347570c8a2cdec3d9ba3680b2d8e"><strong>[sql] [bug] [postgresql] </strong></span>Fixed bug where CREATE TABLE with a no-column table, but a constraint
such as a CHECK constraint would render an erroneous comma in the
definition; this scenario can occur such as with a Postgresql
INHERITS table that has no columns of its own.<a class="changeset-link headerlink reference internal" href="#change-a251347570c8a2cdec3d9ba3680b2d8e">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3598">#3598</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-30"><span class="target" id="change-6a81cbc5fcbb3b255ec04adb72e937a7"><strong>[sql] [bug] </strong></span>Fixed regression in 1.0-released default-processor for multi-VALUES
insert statement, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3288">#3288</a>, where the column type for the
default-holding column would not be propagated to the compiled
statement in the case where the default was being used,
leading to bind-level type handlers not being invoked.<a class="changeset-link headerlink reference internal" href="#change-6a81cbc5fcbb3b255ec04adb72e937a7">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3520">#3520</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-31"><span class="target" id="change-0555461d7e299c51372dcc39d1516f29"><strong>[sql] [bug] </strong></span>Fixed an assertion that would raise somewhat inappropriately
if a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a> were associated with a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> that
is associated with a lower-case-t <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><code class="xref py py-class docutils literal"><span class="pre">TableClause</span></code></a>; the
association should be ignored for the purposes of associating
the index with a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a>.<a class="changeset-link headerlink reference internal" href="#change-0555461d7e299c51372dcc39d1516f29">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3616">#3616</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-32"><span class="target" id="change-4c12275c79c42b62d1c375f76c771599"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.type_coerce" title="sqlalchemy.sql.expression.type_coerce"><code class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></code></a> construct is now a fully fledged Core
expression element which is late-evaluated at compile time.  Previously,
the function was only a conversion function which would handle different
expression inputs by returning either a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.Label" title="sqlalchemy.sql.expression.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a> of a column-oriented
expression or a copy of a given <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code></a> object,
which in particular prevented the operation from being logically
maintained when an ORM-level expression transformation would convert
a column to a bound parameter (e.g. for lazy loading).<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3531"><span>The type_coerce function is now a persistent SQL element</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-4c12275c79c42b62d1c375f76c771599">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3531">#3531</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-33"><span class="target" id="change-6f4cf479ea625f2b2f5aa2a4e952959b"><strong>[sql] [bug] </strong></span>The <a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal"><span class="pre">TypeDecorator</span></code></a> type extender will now work in conjunction
with a <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.SchemaType" title="sqlalchemy.types.SchemaType"><code class="xref py py-class docutils literal"><span class="pre">SchemaType</span></code></a> implementation, typically <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">Enum</span></code></a>
or <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code></a> with regards to ensuring that the per-table
events are propagated from the implementation type to the outer type.
These events are used
to ensure that the constraints or Postgresql types (e.g. ENUM)
are correctly created (and possibly dropped) along with the parent
table.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-2919"><span>TypeDecorator now works with Enum, Boolean, &#8220;schema&#8221; types automatically</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-6f4cf479ea625f2b2f5aa2a4e952959b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2919">#2919</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-34"><span class="target" id="change-e9e0e04652a369370f2eae50538498c9"><strong>[sql] [bug] </strong></span>The behavior of the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.union" title="sqlalchemy.sql.expression.union"><code class="xref py py-func docutils literal"><span class="pre">union()</span></code></a> construct and related constructs
such as <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.union" title="sqlalchemy.orm.query.Query.union"><code class="xref py py-meth docutils literal"><span class="pre">Query.union()</span></code></a> now handle the case where the embedded
SELECT statements need to be parenthesized due to the fact that they
include LIMIT, OFFSET and/or ORDER BY.   These queries <strong>do not work
on SQLite</strong>, and will fail on that backend as they did before, but
should now work on all other backends.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-2528"><span>A UNION or similar of SELECTs with LIMIT/OFFSET/ORDER BY now parenthesizes the embedded selects</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-e9e0e04652a369370f2eae50538498c9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2528">#2528</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-35"><span class="target" id="change-6d7175b6067e4d63a84c6dccbbda213f"><strong>[sql] [mysql] [change] </strong></span>The system by which a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> considers itself to be an
&#8220;auto increment&#8221; column has been changed, such that autoincrement
is no longer implicitly enabled for a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> that has a
composite primary key.  In order to accommodate being able to enable
autoincrement for a composite PK member column while at the same time
maintaining SQLAlchemy&#8217;s long standing behavior of enabling
implicit autoincrement for a single integer primary key, a third
state has been added to the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column.params.autoincrement" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal"><span class="pre">Column.autoincrement</span></code></a> parameter
<code class="docutils literal"><span class="pre">&quot;auto&quot;</span></code>, which is now the default.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="migration_11.html#change-3216"><span>The .autoincrement directive is no longer implicitly enabled for a composite primary key column</span></a></p>
<p class="last"><a class="reference internal" href="migration_11.html#change-mysql-3216"><span>No more generation of an implicit KEY for composite primary key w/ AUTO_INCREMENT</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-6d7175b6067e4d63a84c6dccbbda213f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3216">#3216</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.1.0b1-schema">
<h3>schema<a class="headerlink" href="#change-1.1.0b1-schema" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.1.0b1-36"><span class="target" id="change-c7382e5258b1fe48e537f64ed89e23f6"><strong>[schema] [enhancement] </strong></span>The default generation functions passed to <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a> objects
are now run through &#8220;update_wrapper&#8221;, or an equivalent function
if a callable non-function is passed, so that introspection tools
preserve the name and docstring of the wrapped function.  Pull
request courtesy hsum.<a class="changeset-link headerlink reference internal" href="#change-c7382e5258b1fe48e537f64ed89e23f6">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/204">pull request github:204</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.1.0b1-postgresql">
<h3>postgresql<a class="headerlink" href="#change-1.1.0b1-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.1.0b1-37"><span class="target" id="change-19aa6de2dd87b7d89df8d37af407d32c"><strong>[postgresql] [feature] </strong></span>Added a new constant <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON.NULL" title="sqlalchemy.dialects.postgresql.JSON.NULL"><code class="xref py py-attr docutils literal"><span class="pre">postgresql.JSON.NULL</span></code></a>, indicating
that the JSON NULL value should be used for a value
regardless of other settings.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3514-jsonnull"><span>New JSON.NULL Constant Added</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-19aa6de2dd87b7d89df8d37af407d32c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3514">#3514</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-38"><span class="target" id="change-0b87cf9b7b9494d674dba85bd2b291fd"><strong>[postgresql] [bug] </strong></span>Fixed issue where the &#8220;FOR UPDATE OF&#8221; Postgresql-specific SELECT
modifier would fail if the referred table had a schema qualifier;
PG needs the schema name to be omitted.  Pull request courtesy
Diana Clarke.<a class="changeset-link headerlink reference internal" href="#change-0b87cf9b7b9494d674dba85bd2b291fd">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3573">#3573</a>, <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/216">pull request github:216</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-39"><span class="target" id="change-5c824f327e079f88b287d361bad6c93f"><strong>[postgresql] [bug] </strong></span>Fixed bug where some varieties of SQL expression passed to the
&#8220;where&#8221; clause of <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ExcludeConstraint" title="sqlalchemy.dialects.postgresql.ExcludeConstraint"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ExcludeConstraint</span></code></a> would fail
to be accepted correctly.  Pull request courtesy aisch.<a class="changeset-link headerlink reference internal" href="#change-5c824f327e079f88b287d361bad6c93f">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/215">pull request github:215</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-40"><span class="target" id="change-0abc4dc136478f542d4e23b4a1b845e5"><strong>[postgresql] [bug] </strong></span>Fixed the <code class="docutils literal"><span class="pre">.python_type</span></code> attribute of <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.INTERVAL" title="sqlalchemy.dialects.postgresql.INTERVAL"><code class="xref py py-class docutils literal"><span class="pre">postgresql.INTERVAL</span></code></a>
to return <code class="docutils literal"><span class="pre">datetime.timedelta</span></code> in the same way as that of
<code class="xref py py-obj docutils literal"><span class="pre">types.Interval.python_type</span></code>, rather than raising
<code class="docutils literal"><span class="pre">NotImplementedError</span></code>.<a class="changeset-link headerlink reference internal" href="#change-0abc4dc136478f542d4e23b4a1b845e5">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3571">#3571</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-41"><span class="target" id="change-3d211079eb42a3978c41fd10d3cc5dca"><strong>[postgresql] [bug] </strong></span>An adjustment to the new Postgresql feature of reflecting storage
options and USING of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3455">#3455</a> released in 1.0.6,
to disable the feature for Postgresql versions &lt; 8.2 where the
<code class="docutils literal"><span class="pre">reloptions</span></code> column is not provided; this allows Amazon Redshift
to again work as it is based on an 8.0.x version of Postgresql.
Fix courtesy Pete Hollobon.<a class="changeset-link headerlink reference internal" href="#change-3d211079eb42a3978c41fd10d3cc5dca">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/190">pull request github:190</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-42"><span class="target" id="change-5df5fd63f9f8615d9db6cdf04a4daeef"><strong>[postgresql] [bug] </strong></span>Added support for reflecting the source of materialized views
to the Postgresql version of the <a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_view_definition" title="sqlalchemy.engine.reflection.Inspector.get_view_definition"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_view_definition()</span></code></a>
method.<a class="changeset-link headerlink reference internal" href="#change-5df5fd63f9f8615d9db6cdf04a4daeef">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3587">#3587</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-43"><span class="target" id="change-47dd8bf4fad0416dfd0377b613df9e99"><strong>[postgresql] [bug] </strong></span>The use of a <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a> object that refers
to a <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal"><span class="pre">types.Enum</span></code></a> or <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ENUM</span></code></a> subtype
will now emit the expected &#8220;CREATE TYPE&#8221; and &#8220;DROP TYPE&#8221; DDL when
the type is used within a &#8220;CREATE TABLE&#8221; or &#8220;DROP TABLE&#8221;.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-2729"><span>ARRAY with ENUM will now emit CREATE TYPE for the ENUM</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-47dd8bf4fad0416dfd0377b613df9e99">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2729">#2729</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-44"><span class="target" id="change-de38578e28bc8265d15f20fa71a4ac1b"><strong>[postgresql] [bug] </strong></span>The &#8220;hashable&#8221; flag on special datatypes such as <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a>,
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">postgresql.JSON</span></code></a> and <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">postgresql.HSTORE</span></code></a> is now
set to False, which allows these types to be fetchable in ORM
queries that include entities within the row.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="migration_11.html#change-3499"><span>Changes regarding &#8220;unhashable&#8221; types</span></a></p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3499-postgresql"><span>ARRAY and JSON types now correctly specify &#8220;unhashable&#8221;</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-de38578e28bc8265d15f20fa71a4ac1b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3499">#3499</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-45"><span class="target" id="change-67a74d635741c7b8299e75c637f764fa"><strong>[postgresql] [bug] </strong></span>The Postgresql <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal"><span class="pre">postgresql.ARRAY</span></code></a> type now supports multidimensional
indexed access, e.g. expressions such as <code class="docutils literal"><span class="pre">somecol[5][6]</span></code> without
any need for explicit casts or type coercions, provided
that the <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY.params.dimensions" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-paramref docutils literal"><span class="pre">postgresql.ARRAY.dimensions</span></code></a> parameter is set to the
desired number of dimensions.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3503"><span>Correct SQL Types are Established from Indexed Access of ARRAY, JSON, HSTORE</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-67a74d635741c7b8299e75c637f764fa">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3487">#3487</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-46"><span class="target" id="change-7250d82c6e54b03841a530346c262638"><strong>[postgresql] [bug] </strong></span>The return type for the <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">postgresql.JSON</span></code></a> and <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal"><span class="pre">postgresql.JSONB</span></code></a>
when using indexed access has been fixed to work like Postgresql itself,
and returns an expression that itself is of type <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">postgresql.JSON</span></code></a>
or <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal"><span class="pre">postgresql.JSONB</span></code></a>.  Previously, the accessor would return
<a class="reference internal" href="../core/type_api.html#sqlalchemy.types.NullType" title="sqlalchemy.types.NullType"><code class="xref py py-class docutils literal"><span class="pre">NullType</span></code></a> which disallowed subsequent JSON-like operators to be
used.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3503"><span>Correct SQL Types are Established from Indexed Access of ARRAY, JSON, HSTORE</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-7250d82c6e54b03841a530346c262638">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3503">#3503</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-47"><span class="target" id="change-e131ab33b04196b6d2081a5e820d4974"><strong>[postgresql] [bug] </strong></span>The <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-class docutils literal"><span class="pre">postgresql.JSON</span></code></a>, <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal"><span class="pre">postgresql.JSONB</span></code></a> and
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal"><span class="pre">postgresql.HSTORE</span></code></a> datatypes now allow full control over the
return type from an indexed textual access operation, either <code class="docutils literal"><span class="pre">column[someindex].astext</span></code>
for a JSON type or <code class="docutils literal"><span class="pre">column[someindex]</span></code> for an HSTORE type,
via the <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON.params.astext_type" title="sqlalchemy.dialects.postgresql.JSON"><code class="xref py py-paramref docutils literal"><span class="pre">postgresql.JSON.astext_type</span></code></a> and
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.HSTORE.params.text_type" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-paramref docutils literal"><span class="pre">postgresql.HSTORE.text_type</span></code></a> parameters.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3503"><span>Correct SQL Types are Established from Indexed Access of ARRAY, JSON, HSTORE</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-e131ab33b04196b6d2081a5e820d4974">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3503">#3503</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-48"><span class="target" id="change-6dfedfbab62807e6296ba6410d21fa16"><strong>[postgresql] [bug] </strong></span>The <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON.Comparator.astext" title="sqlalchemy.dialects.postgresql.JSON.Comparator.astext"><code class="xref py py-attr docutils literal"><span class="pre">postgresql.JSON.Comparator.astext</span></code></a> modifier no longer
calls upon <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.ColumnElement.cast" title="sqlalchemy.sql.expression.ColumnElement.cast"><code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.cast()</span></code></a> implicitly, as PG&#8217;s JSON/JSONB
types allow cross-casting between each other as well.  Code that
makes use of <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.ColumnElement.cast" title="sqlalchemy.sql.expression.ColumnElement.cast"><code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.cast()</span></code></a> on JSON indexed access,
e.g. <code class="docutils literal"><span class="pre">col[someindex].cast(Integer)</span></code>, will need to be changed
to call <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON.Comparator.astext" title="sqlalchemy.dialects.postgresql.JSON.Comparator.astext"><code class="xref py py-attr docutils literal"><span class="pre">postgresql.JSON.Comparator.astext</span></code></a> explicitly.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3503-cast"><span>The JSON cast() operation now requires .astext is called explicitly</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-6dfedfbab62807e6296ba6410d21fa16">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3503">#3503</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.1.0b1-mysql">
<h3>mysql<a class="headerlink" href="#change-1.1.0b1-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.1.0b1-49"><span class="target" id="change-f9667c851feee1677c59f17544029c0f"><strong>[mysql] [bug] </strong></span>An adjustment to the regular expression used to parse MySQL views,
such that we no longer assume the &#8220;ALGORITHM&#8221; keyword is present in
the reflected view source, as some users have reported this not being
present in some Amazon RDS environments.<a class="changeset-link headerlink reference internal" href="#change-f9667c851feee1677c59f17544029c0f">¶</a><p>This change is also <strong>backported</strong> to: 1.0.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3613">#3613</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-50"><span class="target" id="change-f0f6fac2dce08c7ccdaf8496b736be70"><strong>[mysql] [bug] </strong></span>Added new reserved words for MySQL 5.7 to the MySQL dialect,
including &#8216;generated&#8217;, &#8216;optimizer_costs&#8217;, &#8216;stored&#8217;, &#8216;virtual&#8217;.
Pull request courtesy Hanno Schlichting.<a class="changeset-link headerlink reference internal" href="#change-f0f6fac2dce08c7ccdaf8496b736be70">¶</a><p>This change is also <strong>backported</strong> to: 1.0.11</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/222">pull request github:222</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-51"><span class="target" id="change-cfe0c14a768819c4be317a8f93fc6ca1"><strong>[mysql] [bug] </strong></span>Fixed bug in MySQL reflection where the &#8220;fractional sections portion&#8221;
of the <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.DATETIME" title="sqlalchemy.dialects.mysql.DATETIME"><code class="xref py py-class docutils literal"><span class="pre">mysql.DATETIME</span></code></a>, <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.TIMESTAMP" title="sqlalchemy.dialects.mysql.TIMESTAMP"><code class="xref py py-class docutils literal"><span class="pre">mysql.TIMESTAMP</span></code></a> and
<a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.TIME" title="sqlalchemy.dialects.mysql.TIME"><code class="xref py py-class docutils literal"><span class="pre">mysql.TIME</span></code></a> types would be incorrectly placed into the
<code class="docutils literal"><span class="pre">timezone</span></code> attribute, which is unused by MySQL, instead of the
<code class="docutils literal"><span class="pre">fsp</span></code> attribute.<a class="changeset-link headerlink reference internal" href="#change-cfe0c14a768819c4be317a8f93fc6ca1">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3602">#3602</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-52"><span class="target" id="change-d2790f0772bca4a21e0a612e8157501c"><strong>[mysql] [change] </strong></span>The MySQL dialect no longer generates an extra &#8220;KEY&#8221; directive when
generating CREATE TABLE DDL for a table using InnoDB with a
composite primary key with AUTO_INCREMENT on a column that isn&#8217;t the
first column;  to overcome InnoDB&#8217;s limitation here, the PRIMARY KEY
constraint is now generated with the AUTO_INCREMENT column placed
first in the list of columns.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="migration_11.html#change-mysql-3216"><span>No more generation of an implicit KEY for composite primary key w/ AUTO_INCREMENT</span></a></p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3216"><span>The .autoincrement directive is no longer implicitly enabled for a composite primary key column</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-d2790f0772bca4a21e0a612e8157501c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3216">#3216</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.1.0b1-sqlite">
<h3>sqlite<a class="headerlink" href="#change-1.1.0b1-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.1.0b1-53"><span class="target" id="change-b5448aba0a3a84361c2f1ee75c597bfa"><strong>[sqlite] [change] </strong></span>Added support to the SQLite dialect for the
<a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_schema_names" title="sqlalchemy.engine.reflection.Inspector.get_schema_names"><code class="xref py py-meth docutils literal"><span class="pre">Inspector.get_schema_names()</span></code></a> method to work with SQLite;
pull request courtesy Brian Van Klaveren.  Also repaired support
for creation of indexes with schemas as well as reflection of
foreign key constraints in schema-bound tables.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-sqlite-schemas"><span>Improved Support for Remote Schemas</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-b5448aba0a3a84361c2f1ee75c597bfa">¶</a><p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/198">pull request github:198</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.1.0b1-mssql">
<h3>mssql<a class="headerlink" href="#change-1.1.0b1-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.1.0b1-54"><span class="target" id="change-76175c8ef9bc1b459aa494a6e4f4ecf7"><strong>[mssql] [bug] </strong></span>Added the error &#8220;20006: Write to the server failed&#8221; to the list
of disconnect errors for the pymssql driver, as this has been observed
to render a connection unusable.<a class="changeset-link headerlink reference internal" href="#change-76175c8ef9bc1b459aa494a6e4f4ecf7">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3585">#3585</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-55"><span class="target" id="change-c6ce444c2d9d02a9012764613adcbb6f"><strong>[mssql] [bug] </strong></span>A descriptive ValueError is now raised in the event that SQL server
returns an invalid date or time format from a DATE or TIME
column, rather than failing with a NoneType error.  Pull request
courtesy Ed Avis.<a class="changeset-link headerlink reference internal" href="#change-c6ce444c2d9d02a9012764613adcbb6f">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/206">pull request github:206</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-56"><span class="target" id="change-90a34bc40d1754631167e274d89d8150"><strong>[mssql] [bug] </strong></span>Fixed issue where DDL generated for the MSSQL types DATETIME2,
TIME and DATETIMEOFFSET with a precision of &#8220;zero&#8221; would not generate
the precision field.  Pull request courtesy Jacobo de Vera.<a class="changeset-link headerlink reference internal" href="#change-90a34bc40d1754631167e274d89d8150">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/213">pull request github:213</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-57"><span class="target" id="change-2101980fac60807a3d347737bfff6a29"><strong>[mssql] [bug] </strong></span>Fixed issue where the SQL Server dialect would reflect a string-
or other variable-length column type with unbounded length
by assigning the token <code class="docutils literal"><span class="pre">&quot;max&quot;</span></code> to the
length attribute of the string.   While using the <code class="docutils literal"><span class="pre">&quot;max&quot;</span></code> token
explicitly is supported by the SQL Server dialect, it isn&#8217;t part
of the normal contract of the base string types, and instead the
length should just be left as None.   The dialect now assigns the
length to None on reflection of the type so that the type behaves
normally in other contexts.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3504"><span>String / varlength types no longer represent &#8220;max&#8221; explicitly on reflection</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-2101980fac60807a3d347737bfff6a29">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3504">#3504</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-58"><span class="target" id="change-88e689d9f43877db618ab1091101ab1a"><strong>[mssql] [change] </strong></span>The <code class="docutils literal"><span class="pre">legacy_schema_aliasing</span></code> flag, introduced in version 1.0.5
as part of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3424">#3424</a> to allow disabling of the MSSQL dialect&#8217;s
attempts to create aliases for schema-qualified tables, now defaults
to False; the old behavior is now disabled unless explicitly turned on.<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="migration_11.html#change-3434"><span>The legacy_schema_aliasing flag is now set to False</span></a></p>
</div>
<a class="changeset-link headerlink reference internal" href="#change-88e689d9f43877db618ab1091101ab1a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3434">#3434</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.1.0b1-oracle">
<h3>oracle<a class="headerlink" href="#change-1.1.0b1-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.1.0b1-59"><span class="target" id="change-857918b0205277b0187d00d8d3424a20"><strong>[oracle] [bug] </strong></span>Fixed bug in Oracle dialect where reflection of tables and other
symbols with names quoted to force all-lower-case would not be
identified properly in reflection queries.  The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.elements.quoted_name" title="sqlalchemy.sql.elements.quoted_name"><code class="xref py py-class docutils literal"><span class="pre">quoted_name</span></code></a>
construct is now applied to incoming symbol names that detect as
forced into all-lower-case within the &#8220;name normalize&#8221; process.<a class="changeset-link headerlink reference internal" href="#change-857918b0205277b0187d00d8d3424a20">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3548">#3548</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-60"><span class="target" id="change-3681aee1a6fe2c2dd10b6adaec2d8ba1"><strong>[oracle] [bug] [py3k] </strong></span>Fixed support for cx_Oracle version 5.2, which was tripping
up SQLAlchemy&#8217;s version detection under Python 3 and inadvertently
not using the correct unicode mode for Python 3.  This would cause
issues such as bound variables mis-interpreted as NULL and rows
silently not being returned.<a class="changeset-link headerlink reference internal" href="#change-3681aee1a6fe2c2dd10b6adaec2d8ba1">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9, 0.9.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3491">#3491</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-1.1.0b1-misc">
<h3>misc<a class="headerlink" href="#change-1.1.0b1-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-1.1.0b1-61"><span class="target" id="change-db8e88bdb6b627fd21b3e403f770aab7"><strong>[feature] [ext] </strong></span>Added the <a class="reference internal" href="../orm/extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy.params.info" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-paramref docutils literal"><span class="pre">AssociationProxy.info</span></code></a> parameter to the
<a class="reference internal" href="../orm/extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-class docutils literal"><span class="pre">AssociationProxy</span></code></a> constructor, to suit the
<a class="reference internal" href="../orm/extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy.info" title="sqlalchemy.ext.associationproxy.AssociationProxy.info"><code class="xref py py-attr docutils literal"><span class="pre">AssociationProxy.info</span></code></a> accessor that was added in
<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2971">#2971</a>.  This is possible because <a class="reference internal" href="../orm/extensions/associationproxy.html#sqlalchemy.ext.associationproxy.AssociationProxy" title="sqlalchemy.ext.associationproxy.AssociationProxy"><code class="xref py py-class docutils literal"><span class="pre">AssociationProxy</span></code></a>
is constructed explicitly, unlike a hybrid which is constructed
implicitly via the decorator syntax.<a class="changeset-link headerlink reference internal" href="#change-db8e88bdb6b627fd21b3e403f770aab7">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3551">#3551</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-62"><span class="target" id="change-cd501a5e5dbf704dd560d997feaff337"><strong>[bug] [ext] </strong></span>Further fixes to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3605">#3605</a>, pop method on <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">MutableDict</span></code></a>,
where the &#8220;default&#8221; argument was not included.<a class="changeset-link headerlink reference internal" href="#change-cd501a5e5dbf704dd560d997feaff337">¶</a><p>This change is also <strong>backported</strong> to: 1.0.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3605">#3605</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-63"><span class="target" id="change-727cea936fe37728b517475466bf3cee"><strong>[bug] [ext] </strong></span>Fixed bug in baked loader system where the systemwide monkeypatch
for setting up baked lazy loaders would interfere with other
loader strategies that rely on lazy loading as a fallback, e.g.
joined and subquery eager loaders, leading to <code class="docutils literal"><span class="pre">IndexError</span></code>
exceptions at mapper configuration time.<a class="changeset-link headerlink reference internal" href="#change-727cea936fe37728b517475466bf3cee">¶</a><p>This change is also <strong>backported</strong> to: 1.0.11</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3612">#3612</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-64"><span class="target" id="change-030dde554d843ad76816222d43a213a3"><strong>[bug] [ext] </strong></span>Added support for the <code class="docutils literal"><span class="pre">dict.pop()</span></code> and <code class="docutils literal"><span class="pre">dict.popitem()</span></code> methods
to the <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal"><span class="pre">mutable.MutableDict</span></code></a> class.<a class="changeset-link headerlink reference internal" href="#change-030dde554d843ad76816222d43a213a3">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3605">#3605</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-65"><span class="target" id="change-1f73b94f43aa3ae205ec5f5e1148f33a"><strong>[bug] [py3k] </strong></span>Updates to internal getargspec() calls, some py36-related
fixture updates, and alterations to two iterators to &#8220;return&#8221; instead
of raising StopIteration, to allow tests to pass without
errors or warnings on Py3.5, Py3.6, pull requests courtesy
Jacob MacDonald, Luri de Silvio, and Phil Jones.<a class="changeset-link headerlink reference internal" href="#change-1f73b94f43aa3ae205ec5f5e1148f33a">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/210">pull request github:210</a>, <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/218">pull request github:218</a>, <a class="reference external" href="https://github.com/zzzeek/sqlalchemy/pull/211">pull request github:211</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-66"><span class="target" id="change-e0405ff090bd7f442c58a916df6588aa"><strong>[bug] [ext] </strong></span>Fixed an issue in baked queries where the .get() method, used either
directly or within lazy loads, didn&#8217;t consider the mapper&#8217;s &#8220;get clause&#8221;
as part of the cache key, causing bound parameter mismatches if the
clause got re-generated.  This clause is cached by mappers
on the fly but in highly concurrent scenarios may be generated more
than once when first accessed.<a class="changeset-link headerlink reference internal" href="#change-e0405ff090bd7f442c58a916df6588aa">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3597">#3597</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-67"><span class="target" id="change-b7a078b1e6bf1423ebdaa554150ea235"><strong>[bug] [examples] </strong></span>Fixed two issues in the &#8220;history_meta&#8221; example where history tracking
could encounter empty history, and where a column keyed to an alternate
attribute name would fail to track properly.  Fixes courtesy
Alex Fraser.<a class="changeset-link headerlink reference internal" href="#change-b7a078b1e6bf1423ebdaa554150ea235">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p></p>
</p>
</li>
<li><p id="change-1.1.0b1-68"><span class="target" id="change-e1db00dea40fb9d94207ef9e0f35f286"><strong>[bug] [sybase] </strong></span>Fixed two issues regarding Sybase reflection, allowing tables
without primary keys to be reflected as well as ensured that
a SQL statement involved in foreign key detection is pre-fetched up
front to avoid driver issues upon nested queries.  Fixes here
courtesy Eugene Zapolsky; note that we cannot currently test
Sybase to locally verify these changes.<a class="changeset-link headerlink reference internal" href="#change-e1db00dea40fb9d94207ef9e0f35f286">¶</a><p>This change is also <strong>backported</strong> to: 1.0.9</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3508">#3508</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3509">#3509</a></p>
</p>
</li>
<li><p id="change-1.1.0b1-69"><span class="target" id="change-8b4c3db7dc07a18b30ec0ca1c83e03b6"><strong>[tests] [change] </strong></span>The ORM and Core tutorials, which have always been in doctest format,
are now exercised within the normal unit test suite in both Python
2 and Python 3.<a class="changeset-link headerlink reference internal" href="#change-8b4c3db7dc07a18b30ec0ca1c83e03b6">¶</a><p>This change is also <strong>backported</strong> to: 1.0.10</p>
<p></p>
</p>
</li>
</ul>
</div>
</div>
</div>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links">
        Previous:
        <a href="migration_11.html" title="previous chapter">What&#8217;s New in SQLAlchemy 1.1?</a>
        Next:
        <a href="changelog_10.html" title="next chapter">1.0 Changelog</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2015, the SQLAlchemy authors and contributors.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.3.
    </div>
</div>

</div>


        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.1.0b1',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


