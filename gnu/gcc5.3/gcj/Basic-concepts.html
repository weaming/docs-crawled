<html lang="en">
<head>
<title>Basic concepts - Guide to GNU gcj</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Guide to GNU gcj">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="About-CNI.html#About-CNI" title="About CNI">
<link rel="next" href="Packages.html#Packages" title="Packages">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 2001-2015 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, the Front-Cover Texts being (a) (see below), and
with the Back-Cover Texts being (b) (see below).
A copy of the license is included in the
section entitled ``GNU Free Documentation License''.


(a) The FSF's Front-Cover Text is:

     A GNU Manual

(b) The FSF's Back-Cover Text is:

     You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development.
-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Basic-concepts"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Packages.html#Packages">Packages</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="About-CNI.html#About-CNI">About CNI</a>
<hr>
</div>

<h3 class="section">11.1 Basic concepts</h3>

<p>In terms of languages features, Java is mostly a subset
of C++.  Java has a few important extensions, plus a powerful standard
class library, but on the whole that does not change the basic similarity. 
Java is a hybrid object-oriented language, with a few native types,
in addition to class types.  It is class-based, where a class may have
static as well as per-object fields, and static as well as instance methods. 
Non-static methods may be virtual, and may be overloaded.  Overloading is
resolved at compile time by matching the actual argument types against
the parameter types.  Virtual methods are implemented using indirect calls
through a dispatch table (virtual function table).  Objects are
allocated on the heap, and initialized using a constructor method. 
Classes are organized in a package hierarchy.

   <p>All of the listed attributes are also true of C++, though C++ has
extra features (for example in C++ objects may be allocated not just
on the heap, but also statically or in a local stack frame).  Because
<samp><span class="command">gcj</span></samp> uses the same compiler technology as G++ (the GNU
C++ compiler), it is possible to make the intersection of the two
languages use the same ABI (object representation and calling
conventions).  The key idea in CNI is that Java objects are C++
objects, and all Java classes are C++ classes (but not the other way
around).  So the most important task in integrating Java and C++ is to
remove gratuitous incompatibilities.

   <p>You write CNI code as a regular C++ source file.  (You do have to use
a Java/CNI-aware C++ compiler, specifically a recent version of G++.)

<p class="noindent">A CNI C++ source file must have:

<pre class="example">     #include &lt;gcj/cni.h&gt;
</pre>
   <p class="noindent">and then must include one header file for each Java class it uses, e.g.:

<pre class="example">     #include &lt;java/lang/Character.h&gt;
     #include &lt;java/util/Date.h&gt;
     #include &lt;java/lang/IndexOutOfBoundsException.h&gt;
</pre>
   <p class="noindent">These header files are automatically generated by <code>gcjh</code>.

   <p>CNI provides some functions and macros to make using Java objects and
primitive types from C++ easier.  In general, these CNI functions and
macros start with the <code>Jv</code> prefix, for example the function
<code>JvNewObjectArray</code>.  This convention is used to avoid conflicts
with other libraries.  Internal functions in CNI start with the prefix
<code>_Jv_</code>.  You should not call these; if you find a need to, let us
know and we will try to come up with an alternate solution.

<h4 class="subsection">11.1.1 Limitations</h4>

<p>Whilst a Java class is just a C++ class that doesn't mean that you are
freed from the shackles of Java, a <acronym>CNI</acronym> C++ class must adhere to the
rules of the Java programming language.

   <p>For example: it is not possible to declare a method in a CNI class
that will take a C string (<code>char*</code>) as an argument, or to declare a
member variable of some non-Java datatype.

   </body></html>

