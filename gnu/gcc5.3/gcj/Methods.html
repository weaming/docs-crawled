<html lang="en">
<head>
<title>Methods - Guide to GNU gcj</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Guide to GNU gcj">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="About-CNI.html#About-CNI" title="About CNI">
<link rel="prev" href="Arrays.html#Arrays" title="Arrays">
<link rel="next" href="Strings.html#Strings" title="Strings">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 2001-2015 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, the Front-Cover Texts being (a) (see below), and
with the Back-Cover Texts being (b) (see below).
A copy of the license is included in the
section entitled ``GNU Free Documentation License''.


(a) The FSF's Front-Cover Text is:

     A GNU Manual

(b) The FSF's Back-Cover Text is:

     You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development.
-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Methods"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Strings.html#Strings">Strings</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Arrays.html#Arrays">Arrays</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="About-CNI.html#About-CNI">About CNI</a>
<hr>
</div>

<h3 class="section">11.11 Methods</h3>

<p>Java methods are mapped directly into C++ methods. 
The header files generated by <code>gcjh</code>
include the appropriate method definitions. 
Basically, the generated methods have the same names and
<em>corresponding</em> types as the Java methods,
and are called in the natural manner.

<h4 class="subsection">11.11.1 Overloading</h4>

<p>Both Java and C++ provide method overloading, where multiple
methods in a class have the same name, and the correct one is chosen
(at compile time) depending on the argument types. 
The rules for choosing the correct method are (as expected) more complicated
in C++ than in Java, but given a set of overloaded methods
generated by <code>gcjh</code> the C++ compiler will choose
the expected one.

   <p>Common assemblers and linkers are not aware of C++ overloading,
so the standard implementation strategy is to encode the
parameter types of a method into its assembly-level name. 
This encoding is called <dfn>mangling</dfn>,
and the encoded name is the <dfn>mangled name</dfn>. 
The same mechanism is used to implement Java overloading. 
For C++/Java interoperability, it is important that both the Java
and C++ compilers use the <em>same</em> encoding scheme.

<h4 class="subsection">11.11.2 Static methods</h4>

<p>Static Java methods are invoked in <acronym>CNI</acronym> using the standard
C++ syntax, using the <code>::</code> operator rather
than the <code>.</code> operator.

<p class="noindent">For example:

<pre class="example">     jint i = java::lang::Math::round((jfloat) 2.3);
</pre>
   <p class="noindent">C++ method definition syntax is used to define a static native method. 
For example:

<pre class="example">     #include &lt;java/lang/Integer&gt;
     java::lang::Integer*
     java::lang::Integer::getInteger(jstring str)
     {
       ...
     }
</pre>
   <h4 class="subsection">11.11.3 Object Constructors</h4>

<p>Constructors are called implicitly as part of object allocation
using the <code>new</code> operator.

<p class="noindent">For example:

<pre class="example">     java::lang::Integer *x = new java::lang::Integer(234);
</pre>
   <p>Java does not allow a constructor to be a native method. 
This limitation can be coded round however because a constructor
can <em>call</em> a native method.

<h4 class="subsection">11.11.4 Instance methods</h4>

<p>Calling a Java instance method from a C++ <acronym>CNI</acronym> method is done
using the standard C++ syntax, e.g.:

<pre class="example">     // <span class="roman">First create the Java object.</span>
     java::lang::Integer *x = new java::lang::Integer(234);
     // <span class="roman">Now call a method.</span>
     jint prim_value = x-&gt;intValue();
     if (x-&gt;longValue == 0)
       ...
</pre>
   <p class="noindent">Defining a Java native instance method is also done the natural way:

<pre class="example">     #include &lt;java/lang/Integer.h&gt;
     
     jdouble
     java::lang:Integer::doubleValue()
     {
       return (jdouble) value;
     }
</pre>
   <h4 class="subsection">11.11.5 Interface methods</h4>

<p>In Java you can call a method using an interface reference.  This is
supported, but not completely.  See <a href="Interfaces.html#Interfaces">Interfaces</a>.

   </body></html>

