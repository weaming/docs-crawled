<html lang="en">
<head>
<title>Pragma Test_Case - GNAT Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="GNAT Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Implementation-Defined-Pragmas.html#Implementation-Defined-Pragmas" title="Implementation Defined Pragmas">
<link rel="prev" href="Pragma-Task_005fStorage.html#Pragma-Task_005fStorage" title="Pragma Task_Storage">
<link rel="next" href="Pragma-Thread_005fLocal_005fStorage.html#Pragma-Thread_005fLocal_005fStorage" title="Pragma Thread_Local_Storage">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--

     GNAT Reference Manual , March 24, 2015

     AdaCore

     Copyright (C) 2008-2015, Free Software Foundation
-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Pragma-Test_Case"></a>
<a name="Pragma-Test_005fCase"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Pragma-Thread_005fLocal_005fStorage.html#Pragma-Thread_005fLocal_005fStorage">Pragma Thread_Local_Storage</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Pragma-Task_005fStorage.html#Pragma-Task_005fStorage">Pragma Task_Storage</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Implementation-Defined-Pragmas.html#Implementation-Defined-Pragmas">Implementation Defined Pragmas</a>
<hr>
</div>

<p><a name="gnat_005frm_002fimplementation_005fdefined_005fpragmas-pragma_002dtest_002dcase"></a><a name="c9"></a>

<h3 class="section">2.170 Pragma Test_Case</h3>

<p><a name="index-Test-cases-92"></a>
Syntax:

<pre class="example">    pragma Test_Case (
       [Name     =&gt;] static_string_Expression
      ,[Mode     =&gt;] (Nominal | Robustness)
     [, Requires =&gt;  Boolean_Expression]
     [, Ensures  =&gt;  Boolean_Expression]);
</pre>
<p>The <cite>Test_Case</cite> pragma allows defining fine-grain specifications
for use by testing tools. 
The compiler checks the validity of the <cite>Test_Case</cite> pragma, but its
presence does not lead to any modification of the code generated by the
compiler.

<p><cite>Test_Case</cite> pragmas may only appear immediately following the
(separate) declaration of a subprogram in a package declaration, inside
a package spec unit. Only other pragmas may intervene (that is appear
between the subprogram declaration and a test case).

<p>The compiler checks that boolean expressions given in <cite>Requires</cite> and
<cite>Ensures</cite> are valid, where the rules for <cite>Requires</cite> are the
same as the rule for an expression in <cite>Precondition</cite> and the rules
for <cite>Ensures</cite> are the same as the rule for an expression in
<cite>Postcondition</cite>. In particular, attributes <cite>'Old</cite> and
<cite>'Result</cite> can only be used within the <cite>Ensures</cite>
expression. The following is an example of use within a package spec:

<pre class="example">    package Math_Functions is
       ...
       function Sqrt (Arg : Float) return Float;
       pragma Test_Case (Name     =&gt; "Test 1",
                         Mode     =&gt; Nominal,
                         Requires =&gt; Arg &lt; 10000,
                         Ensures  =&gt; Sqrt'Result &lt; 10);
       ...
    end Math_Functions;
</pre>
<p>The meaning of a test case is that there is at least one context where
<cite>Requires</cite> holds such that, if the associated subprogram is executed in
that context, then <cite>Ensures</cite> holds when the subprogram returns. 
Mode <cite>Nominal</cite> indicates that the input context should also satisfy the
precondition of the subprogram, and the output context should also satisfy its
postcondition. Mode <cite>Robustness</cite> indicates that the precondition and
postcondition of the subprogram should be ignored for this test case.

</body></html>

