<html lang="en">
<head>
<title>No_Dispatching_Calls - GNAT Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="GNAT Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Partition_002dWide-Restrictions.html#Partition_002dWide-Restrictions" title="Partition-Wide Restrictions">
<link rel="prev" href="No_005fDispatch.html#No_005fDispatch" title="No_Dispatch">
<link rel="next" href="No_005fDynamic_005fAttachment.html#No_005fDynamic_005fAttachment" title="No_Dynamic_Attachment">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--

     GNAT Reference Manual , March 24, 2015

     AdaCore

     Copyright (C) 2008-2015, Free Software Foundation
-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="No_Dispatching_Calls"></a>
<a name="No_005fDispatching_005fCalls"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="No_005fDynamic_005fAttachment.html#No_005fDynamic_005fAttachment">No_Dynamic_Attachment</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="No_005fDispatch.html#No_005fDispatch">No_Dispatch</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Partition_002dWide-Restrictions.html#Partition_002dWide-Restrictions">Partition-Wide Restrictions</a>
<hr>
</div>

<p><a name="gnat_005frm_002fstandard_005fand_005fimplementation_005fdefined_005frestrictions-no_002ddispatching_002dcalls"></a><a name="g_t17b"></a>

<h4 class="subsection">5.1.21 No_Dispatching_Calls</h4>

<p><a name="index-No_005fDispatching_005fCalls-306"></a>
[GNAT] This restriction ensures at compile time that the code generated by the
compiler involves no dispatching calls. The use of this restriction allows the
safe use of record extensions, classwide membership tests and other classwide
features not involving implicit dispatching. This restriction ensures that
the code contains no indirect calls through a dispatching mechanism. Note that
this includes internally-generated calls created by the compiler, for example
in the implementation of class-wide objects assignments. The
membership test is allowed in the presence of this restriction, because its
implementation requires no dispatching. 
This restriction is comparable to the official Ada restriction
<cite>No_Dispatch</cite> except that it is a bit less restrictive in that it allows
all classwide constructs that do not imply dispatching. 
The following example indicates constructs that violate this restriction.

<pre class="example">    package Pkg is
      type T is tagged record
        Data : Natural;
      end record;
      procedure P (X : T);
    
      type DT is new T with record
        More_Data : Natural;
      end record;
      procedure Q (X : DT);
    end Pkg;
    
    with Pkg; use Pkg;
    procedure Example is
      procedure Test (O : T'Class) is
        N : Natural  := O'Size;--  Error: Dispatching call
        C : T'Class := O;      --  Error: implicit Dispatching Call
      begin
        if O in DT'Class then  --  OK   : Membership test
           Q (DT (O));         --  OK   : Type conversion plus direct call
        else
           P (O);              --  Error: Dispatching call
        end if;
      end Test;
    
      Obj : DT;
    begin
      P (Obj);                 --  OK   : Direct call
      P (T (Obj));             --  OK   : Type conversion plus direct call
      P (T'Class (Obj));       --  Error: Dispatching call
    
      Test (Obj);              --  OK   : Type conversion
    
      if Obj in T'Class then   --  OK   : Membership test
         null;
      end if;
    end Example;
</pre>
</body></html>

